<!--
  Generated template for the Ble page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>{{device.name}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-buttons>
    <button ion-button (click) = "disconnect(device.id)" block>Disconnect</button>
  </ion-buttons>
  <ion-card *ngFor="let characteristic of characteristics">
    <ion-card-header>UUID: {{characteristic.characteristic}}</ion-card-header>
    <ion-card-content>
      <p>Properties: {{characteristic.properties}}<br>
        Service: {{characteristic.service}} <br>
      <p *ngIf="isRead==true">Value : {{StringData}}</p>
      <p *ngIf="isNotify==true">Value Notified : {{StringDataNotify}}</p>
      <ion-buttons end>
        <button *ngIf="displayReadButton(characteristic.properties)==true" ion-button (click)="readCharacteristic(device.id, characteristic.service, characteristic.characteristic)" round>Read</button>
        <button *ngIf="displayWriteButton(characteristic.properties)==true" ion-button (click)="writeCharacteristic(device.id, characteristic.service, characteristic.characteristic, 'BleTest')" round>Write</button>
        <button *ngIf="displayNotifyButton(characteristic.properties)== true" ion-button (click)="startNotify(device.id, characteristic.service, characteristic.characteristic)" round>Notify</button>
        <button *ngIf="displayNotifyButton(characteristic.properties)== true" ion-button (click)="stopNotify(device.id, characteristic.service, characteristic.characteristic)" round>Stop Notify</button>
      </ion-buttons>
      <!--<ion-list *ngIf="displayNotifyButton(characteristic.properties)==true" end>
        <ion-item>
          <ion-label>Notify</ion-label>
          <ion-toggle  (ionChange)="startNotify(device.id, characteristic.service, characteristic.characteristic)" end></ion-toggle>
        </ion-item>
      </ion-list>-->
    </ion-card-content>
  </ion-card>
  <ion-spinner *ngIf="connecting==true" name="circles"></ion-spinner>
</ion-content>
